Apple Silicon & Native Mac Support: Summary of Changes
====================================================

This file lists all the main changes made to the project to support native Apple Silicon (M1/M2) Macs, improve LaTeX/LyX compatibility, and streamline setup. Each change is described in simple language, with references to the main files/scripts involved.

1. **Apple Silicon (M1/M2) Native Support**
   - Added full support for ARM64 (Apple Silicon) Macs, so you no longer need to use Rosetta 2 (which slows things down).
   - All setup scripts and environments now detect your Mac's architecture and optimize for it.
   - **Files changed/added:**
     - `setup/conda_env.yaml`
     - `setup/setup_apple_silicon.sh` (new)
     - `setup/setup_r.R`
     - `setup/check_setup.py`
     - `setup/benchmark_apple_silicon.py` (new)
     - `README.md`, `APPLE_SILICON_MIGRATION.md`

2. **Conda Environment Improvements**
   - Expanded the list of R and Python packages in `setup/conda_env.yaml` to include those compatible with Apple Silicon.
   - Ensured all packages are installed natively (no x86_64 emulation).

3. **R Setup Script Enhancements**
   - `setup/setup_r.R` now detects if you are on Apple Silicon and installs R packages from source for best compatibility and speed.
   - Improved error handling and logging for R package installation.

4. **One-Command Apple Silicon Setup**
   - Added `setup/setup_apple_silicon.sh` for a streamlined, automated setup on Apple Silicon Macs.
   - This script checks your architecture, sets up the conda environment, installs R packages, and creates a config file for Apple Silicon.

5. **Setup Checker Improvements**
   - `setup/check_setup.py` now detects Apple Silicon and gives you specific feedback and recommendations for best performance.
   - Checks both Python and R architectures to ensure everything is running natively.

6. **Performance Benchmarking**
   - Added `setup/benchmark_apple_silicon.py` to measure and compare performance of Python, R, and the full workflow on Apple Silicon vs. Rosetta 2.

7. **Documentation Updates**
   - Updated `README.md` with a new section for Apple Silicon setup, troubleshooting, and performance tips.
   - Added `APPLE_SILICON_MIGRATION.md` with a detailed migration guide, technical details, and troubleshooting.

8. **LaTeX/LyX Compatibility Fixes**
   - Documented the need for a full MacTeX installation (not Homebrew) for LyX to find all required LaTeX classes (like `article.cls` and `natbib.sty`).
   - Added troubleshooting steps for LaTeX/LyX issues in the documentation.
   - If LyX can't find LaTeX classes after installing MacTeX, delete the LyX config folder (`~/Library/Application Support/LyX-2.4/`) and re-run LyX to reconfigure.

9. **General Troubleshooting and Best Practices**
   - Added clear error messages and guidance in setup scripts for common issues (e.g., missing packages, wrong architecture).
   - Provided commands to check your architecture and environment in the docs.

10. **Backward Compatibility**
    - All changes maintain compatibility with Intel Macs and other platforms. The setup scripts automatically detect your system and adjust accordingly.

---

**In summary:**
- The project now runs natively and much faster on Apple Silicon Macs.
- Setup is easier and more robust, with clear instructions and troubleshooting.
- LaTeX/LyX workflows are fully supported if you follow the updated installation steps.
- All changes are documented in `README.md` and `APPLE_SILICON_MIGRATION.md`. 